{% extends 'base/base.html'%}


{% block content %}

<div id="chart-dashboard">
    <div class="row">

    <div class="col s12 m8 l8">
                                <div class="card">
                                    <div class="card-move-up waves-effect waves-block waves-light">
                                        <div class="move-up cyan darken-1">
                                            <div>
                                                <span class="chart-title white-text">Comportamiento de las oficinas</span>
                                                <div class="chart-revenue cyan darken-2 white-text">
                                                    <p class="chart-revenue-total">$4,500.85</p>
                                                    <p class="chart-revenue-per"><i class="mdi-navigation-arrow-drop-up"></i> 21.80 %</p>
                                                </div>
                                                <div class="switch chart-revenue-switch right">
                                                    <label class="cyan-text text-lighten-5">
                                                      Cantidad
                                                      <input type="checkbox">
                                                      <span class="lever"></span> Monto
                                                    </label>
                                                </div>
                                            </div>
                                            <div class="trending-line-chart-wrapper">
                                                <canvas id="trending-line-chart" height="70"></canvas>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="card-content">
                                        <a class="btn-floating btn-move-up waves-effect waves-light darken-2 right"><i class="mdi-content-add activator"></i></a>
                                        <div class="col s12 m3 l3">
                                            <div id="doughnut-chart-wrapper">
                                                <canvas id="doughnut-chart" height="200"></canvas>
                                                <div class="doughnut-chart-status">4500
                                                    <p class="ultra-small center-align">Sold</p>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="col s12 m2 l2">
                                            <ul class="doughnut-chart-legend">
                                                <li class="mobile ultra-small"><span class="legend-color"></span>Mobile</li>
                                                <li class="kitchen ultra-small"><span class="legend-color"></span> Kitchen</li>
                                                <li class="home ultra-small"><span class="legend-color"></span> Home</li>
                                            </ul>
                                        </div>
                                        <div class="col s12 m5 l6">
                                            <div class="trending-bar-chart-wrapper">
                                                <canvas id="trending-bar-chart" height="90"></canvas>                                                
                                            </div>
                                        </div>
                                    </div>

                                    <div class="card-reveal">
                                        <span class="card-title grey-text text-darken-4">Revenue by Month <i class="mdi-navigation-close right"></i></span>
                                        <table class="responsive-table">
                                            <thead>
                                                <tr>
                                                    <th data-field="id">ID</th>
                                                    <th data-field="month">Month</th>
                                                    <th data-field="item-sold">Item Sold</th>
                                                    <th data-field="item-price">Item Price</th>
                                                    <th data-field="total-profit">Total Profit</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td>1</td>
                                                    <td>January</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>2</td>
                                                    <td>February</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>3</td>
                                                    <td>March</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>4</td>
                                                    <td>April</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>5</td>
                                                    <td>May</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>6</td>
                                                    <td>June</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>7</td>
                                                    <td>July</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>8</td>
                                                    <td>August</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>9</td>
                                                    <td>Septmber</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>10</td>
                                                    <td>Octomber</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>11</td>
                                                    <td>November</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                                <tr>
                                                    <td>12</td>
                                                    <td>December</td>
                                                    <td>122</td>
                                                    <td>100</td>
                                                    <td>$122,00.00</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>


                                </div>
                            </div>
    <div class="col s12 m4 l4">
        <div class="card">
            <div class="card-move-up teal waves-effect waves-block waves-light">
                <div class="move-up">
                    <p class="margin white-text">Browser Stats</p>
                    <canvas id="trending-radar-chart" height="114"></canvas>
                </div>
            </div>
            <div class="card-content  teal darken-2">
                <a class="btn-floating btn-move-up waves-effect waves-light darken-2 right"><i class="mdi-content-add activator"></i></a>
                <div class="line-chart-wrapper">
                    <p class="margin white-text">Indidencias por Región</p>
                    <!-- <canvas id="line-chart" height="114"></canvas> -->
                </div>
            </div>
            <div class="card-reveal">
                <span class="card-title grey-text text-darken-4"> <i class="mdi-navigation-close right"></i></span>
                <table class="responsive-table">
                    <thead>
                        <tr>
                            <th data-field="country-name">Country Name</th>
                            <th data-field="item-sold">Item Sold</th>
                            <th data-field="total-profit">Total Profit</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>USA</td>
                            <td>65</td>
                            <td>$452.55</td>
                        </tr>
                        <tr>
                            <td>UK</td>
                            <td>76</td>
                            <td>$452.55</td>
                        </tr>
                        <tr>
                            <td>Canada</td>
                            <td>65</td>
                            <td>$452.55</td>
                        </tr>
                        <tr>
                            <td>Brazil</td>
                            <td>76</td>
                            <td>$452.55</td>
                        </tr>
                        <tr>

                            <td>India</td>
                            <td>65</td>
                            <td>$452.55</td>
                        </tr>
                        <tr>
                            <td>France</td>
                            <td>76</td>
                            <td>$452.55</td>
                        </tr>
                        <tr>
                            <td>Austrelia</td>
                            <td>65</td>
                            <td>$452.55</td>
                        </tr>
                        <tr>
                            <td>Russia</td>
                            <td>76</td>
                            <td>$452.55</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
</div>

        <div class="col s12 m8 l8">
            <div class="card">
                <div class="sample-chart-wrapper">
                    <span>Top Indicadores por Incidendias</span>
                    <div id="top-indicadores-incidencias" class="graph"></div>
                  </div>
            </div>
        </div>


        <div class="col s12 m8 l4">
            <div class="card">
                <div class="sample-chart-wrapper">
                    <span>Top Incidendias por Categoría</span>
                    <div id="top-indicadores-categorias" class="graph"></div>
                  </div>
            </div>
        </div>
    </div>

</div>

<div class="row">
    <div class="col s12 m12">
        <div class="card" style="padding:2px 13px 2px 13px">
            {% include 'dashboard/map_view.html'%}
        </div>
    </div>
</div>

<script type="text/javascript" src="/static/js/modules/map_view.js"></script>

{% endblock %}



{% block scripts%}

<script>
    $.get('/dashboard/data')
        .success(function (response) {
        var MorrisBar = (selector, data) => Morris.Bar({ element: selector, data: data, xkey: 'name', ykeys: ['amount'], labels: ['Cantidad'] });

        MorrisBar('top-indicadores-incidencias', response.top_ten_indicator);
        MorrisBar('top-indicadores-categorias', response.top_ten_indicator);

        // var extract_data = (data, data_prop) => data.map((i) => i[data_prop])
    });




        var labels = ["ENE","FEB","MAR","ABR","MAY","JUN","JUL", "AGO", "SEP", "OCT", "NOV", "DIC"];
        var initialLabels = labels.slice(0,7);
        var data = {
            labels : initialLabels,
            datasets : [
                {
                    label: "Av. 27 de febrero",
                    backgroundColor : "rgba(128, 222, 234, 0.6)",
                    pointRadius : 5,
                    borderColor :  "rgba(255,255,255,0.8)",
                    pointBackgroundColor : "#00bcd4",
                    pointBorderColor : "#ffffff",
                    pointHoverBackgroundColor : "#ffffff",
                    pointHoverBorderColor : "#ffffff",
                    data: [1, 5, 2, 4, 8, 5, 8]
                },
                {
                    label: "Av. Tirandentes",
                    backgroundColor : "rgba(128, 222, 234, 0.3)",
                    strokeColor : "#80deea",
                    pointRadius : 5,
                    borderColor :  "rgba(255,255,255,0.8)",
                    pointBackgroundColor : "#00bcd4",
                    pointBorderColor : "#fff",
                    pointHoverBackgroundColor : "#80deea",
                    pointHoverBorderColor : "#80deea",
                    data: [6, 2, 9, 2, 5, 10, 4]
                }
            ]
        };

        var ctx = document.getElementById("trending-line-chart").getContext("2d");
        new Chart(ctx, {
            type: 'line',
            data: data,
            options: {
                tooltips : {
                    backgroundColor: "rgba(255,255,255,0.8)",
                    FontSize: 12,
                    FontColor: "#000",
                    TitleFontFamily: "'Roboto','Helvetica Neue', 'Helvetica', 'Arial', sans-serif",
                    TitleFontSize: 14,
                    TitleFontStyle: "bold",
                    TitleFontColor: "#000",
                    YPadding: 8,
                    XPadding: 16,
                    CaretSize: 10,
                    CornerRadius: 6
                },
                scales: {
                    yAxes: [{
                        gridLines: {
                            color: 'rgba(255,255,255,0.4)'
                        }
                    }],
                    xAxes: [{
                        gridLines: {
                            display: false
                        }
                    }]
                },
                legend: {
                    labels: {
                        fontColor: 'white'
                    }
                }
            }
        });


        new Chart(document.getElementById("doughnut-chart"), {
            "type": "doughnut",
            "data": {
                "labels": ["Red", "Blue", "Yellow"],
                "datasets": [{
                    "label": "My First Dataset",
                    "data": [300, 50, 100],
                    "backgroundColor": ["rgb(255, 99, 132)", "rgb(54, 162, 235)", "rgb(255, 205, 86)"]
                }]
            },
            options : {
                legend:{ display : false}
            }
        });


        var myBarChart = new Chart(document.getElementById("trending-bar-chart"), {
            type: 'bar',
            data: {
                labels : ["JAN","FEB","MAR","APR","MAY"],
                datasets: [
                    {
                        label: "Bar dataset",
                        backgroundColor: "#46BFBD",
                        borderColor: "#46BFBD",
                        hoverBackgroundColor: "rgba(70, 191, 189, 0.4)",
                        hoverBorderColor: "rgba(70, 191, 189, 0.9)",
                        data: [6, 9, 8, 4, 6]
                    }
                ]
            },
            options: {}
        });


            var myRadarChart = new Chart(ctx, {
                type: 'radar',
                data: data,
                options: options
});
</script>
{% endblock %}